-- 2

from "../modules/libc.zpp" import [ malloc, free ]

fn main(argc: u32, argv: **u8) -> i32:
  x: *mut u8 = malloc(type_size!(|i32|))
  defer free(x)

  *(x as *mut i32) = argc as i32

  -- in return expression is still available
  -- it means the free is called just before
  -- the terminator (return instruction)
  return *(x as *i32)
